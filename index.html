<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/css/styles.css">
    <title>Another Javascript Editor</title>
</head>
<body>

    <!-- The inner html will be replaced with the editor instance -->
    <div id="editor">
        <h1>Welcome to <span style="text-decoration:underline;">AJE</span> AGAIN</h1>
        <p>I am some plain text for formatting</p>
        <p>I am AJE - <span style="font-style:italic;">Another <span style="font-weight:bold;">Javascript</span> Editor</span>! My name is pronounced <span style="font-weight:bold;">Ajay</span>.</p>
        <blockquote>I am a block quote and am not yet supported by AJE so you won't see me when the page is saved.</blockquote>
        <h2>Lists</h2>
        <ul>
            <li>I am an unordered list A</li>
            <li>I am an unordered list B</li>
            <li>I am an unordered list C</li>
        </ul>
        <ol>
            <li>I am an ordered list 1</li>
            <li>I am an ordered list 2</li>
            <li>I am an ordered list 3</li>
        </ol>
        <h2>Custom elements</h2>
        <h3>Block level elements</h3>
        <p>This paragraph contains a custom element
            <custom id="kranj6hr0745u1oxn7du">
                <span class="property1">a</span>
                <span class="property2">b</span>
                <span class="property3">c</span>
            </custom>
        </p>
        <h3>Inline level elements</h3>
        <p>This is an inline element with a link to the <a href="https://bbc.co.uk" data-display="2" data-label="BBC"></a> website.</p>
    </div>
    <button type="button" id="save">Save</button>
    <div id="debug"></div>

    <!-- Bundled version -->
    <!-- <script src='./public/js/AJE.js' charset="utf-8"></script> 
        <script type="text/javascript">
        // Choose location for editor and the default content
        const target = document.getElementById('editor')
        let content = target.innerHTML
        target.innerHTML = ''
        // Setup plugins - required mentions.css to be included in head
        AJE.Mentions.initPeople(['David','William', 'Jenny','Sally', 'Sarah', 'Susan','Brian'])
        // Define editor options
        const options = {
            // Toolbar buttons required
            // Allowed values 'H1','H2','P','OL','UL','B','U','I','CLEAR','UNDO','REDO']
            // All other elements are filtered out unless specified below in a plugin
            tags: ['H1','H2','P','OL','UL','B','I','U','CLEAR'], 
            // Automatically number headings using outline numbering. Allowed values 'on', 'off'       
            headingNumbers: 'on', 
            // Custom plugs to add to the toolbar to enhance the editor
            plugins: [AJE.Mentions, AJE.Links, AJE.Customs],
            // Number of Undo operations supported, max 10       
            bufferSize: 10     
        }
        // Create editor and add to dom in target position
        const editor = new AJE.Editor(target, content, options)
    </script> -->

    <!-- None-bundled version -->
    <script type="module" charset="utf-8">
        import Editor from './src/js/Editor.js'
        import * as Mentions from './src/js/plugins/mentions.js'
        import * as Links from './src/js/plugins/links.js'
        import * as Colours from './src/js/plugins/colours.js'
        import * as Custom from './src/js/plugins/customPlugin.js'
        // Choose location for editor and the default content
        const target = document.getElementById('editor')
        let content = target.innerHTML
        target.innerHTML = ''
        // Setup plugins - required mentions.css to be included in head
        Mentions.initPeople(['David','William', 'Jenny','Sally', 'Sarah', 'Susan','Brian'])
        // Define editor options
        const options = {
            // Toolbar buttons required
            // Allowed values 'H1','H2','H3','P','OL','UL','B','U','I','CLEAR','UNDO','REDO']
            // All other elements are filtered out unless specified below in a plugin
            tags: ['H1','H2','H3','P','OL','UL','B','I','U','CLEAR'],
            // Automatically number headings using outline numbering. Allowed values 'on', 'off'       
            headingNumbers: 'on', 
            // Custom plugs to add to the toolbar to enhance the editor
            plugins: [Mentions, Links, Custom, Colours],
            // Number of Undo operations supported, max 10       
            bufferSize: 10     
        }
        // Create editor and add to dom in target position
        const editor = new Editor(target, content, options)
        // Look for Save
        const save = document.getElementById('save')
        save.addEventListener('click', ()=>{
            const xml = editor.save()
            //editor.update(xml)
            console.warn('Cleaned editor content:\n'+xml)
            window.alert('Cleaned editor content:\n'+xml)
        })
    </script>
    
</body>
</html>