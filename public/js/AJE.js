/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("AJE", [], factory);
	else if(typeof exports === 'object')
		exports["AJE"] = factory();
	else
		root["AJE"] = factory();
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/Editor.js":
/*!**************************!*\
  !*** ./src/js/Editor.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./templates.js */ \"./src/js/templates.js\");\n/* harmony import */ var _feedback_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./feedback.js */ \"./src/js/feedback.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers.js */ \"./src/js/helpers.js\");\n/* harmony import */ var _block_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block.js */ \"./src/js/block.js\");\n/* harmony import */ var _inline_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./inline.js */ \"./src/js/inline.js\");\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons.js */ \"./src/js/icons.js\");\n/* harmony import */ var _buffer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./buffer.js */ \"./src/js/buffer.js\");\n\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\nvar Editor = /*#__PURE__*/function () {\n  // -----------------------------------------------------------------------------\n  // @section Initialisation\n  // -----------------------------------------------------------------------------\n  function Editor(target, content, options) {\n    var _this = this;\n\n    _classCallCheck(this, Editor);\n\n    // Initialise options & toolbar\n    this.options = this.initOptions(options);\n    this.initToolbar(); // Initialise the editor\n\n    target.innerHTML = _templates_js__WEBPACK_IMPORTED_MODULE_0__.editor(this.toolbar, this.options);\n    this.editorNode = target.querySelector('.editor-body');\n    this.toolbarNode = target.querySelector('.editor-toolbar'); // Reset global range\n\n    this.range = false; // Add the content\n\n    var clean = this.getCleanData(content);\n    this.editorNode.innerHTML = clean; // Events\n\n    this.listenForMouseUpEvents();\n    this.listenForKeydownEvents();\n    this.listenForPasteEvents();\n    this.listenForKeyupEvents();\n    this.listenForToolbarButtonClicks();\n    this.listenForCustomEvents(); // Initialise paste buffer\n\n    setTimeout(function () {\n      return _this.buffer = new _buffer_js__WEBPACK_IMPORTED_MODULE_6__.default(_this.options.bufferSize, _this.editorNode);\n    }, 100);\n  }\n\n  _createClass(Editor, [{\n    key: \"initOptions\",\n    value: function initOptions(options) {\n      var elements = ['H1', 'H2', 'P', 'OL', 'UL', 'B', 'I', 'U'];\n      var plugins = [];\n      var headingNumbers = 'off';\n      var bufferSize = 10;\n\n      if (options) {\n        options.elements = options.elements !== undefined ? options.elements : elements;\n        options.plugins = options.plugins !== undefined ? options.plugins : plugins;\n        options.headingNumbers = options.headingNumbers !== undefined ? options.headingNumbers : headingNumbers;\n        options.bufferSize = options.bufferSize !== undefined ? Math.max(parseInt(options.bufferSize), bufferSize) : bufferSize;\n      } else {\n        options = {\n          elements: elements,\n          plugins: plugins,\n          headingNumbers: headingNumbers,\n          bufferSize: bufferSize\n        };\n      } // Make sure all upper case\n\n\n      for (var i = 0; i < options.elements.length; i++) {\n        options.elements[i] = options.elements[i].toUpperCase();\n      }\n\n      console.log('options', options);\n      return options;\n    }\n  }, {\n    key: \"initToolbar\",\n    value: function initToolbar() {\n      // Default toolbar\n      var toolbar = [{\n        type: 'block',\n        id: 'b-h1',\n        tag: 'H1',\n        label: 'Heading 1',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.h1\n      }, {\n        type: 'block',\n        id: 'b-h2',\n        tag: 'H2',\n        label: 'Heading 2',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.h2\n      }, {\n        type: 'block',\n        id: 'b-p',\n        tag: 'P',\n        label: 'Paragraph',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.p\n      }, {\n        type: 'list',\n        id: 'b-ol',\n        tag: 'OL',\n        label: 'Ordered list',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.ol\n      }, {\n        type: 'list',\n        id: 'b-ul',\n        tag: 'UL',\n        label: 'Unordered list',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.ul\n      }, {\n        type: 'inline',\n        id: 'b-b',\n        tag: 'B',\n        label: 'Bold',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.b\n      }, {\n        type: 'inline',\n        id: 'b-i',\n        tag: 'I',\n        label: 'Italic',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.i\n      }, {\n        type: 'inline',\n        id: 'b-u',\n        tag: 'U',\n        label: 'Underline',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.u\n      }, {\n        type: 'inline',\n        id: 'b-ยง',\n        tag: 'CLEAR',\n        label: 'Clear',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.clear\n      }, {\n        type: 'edit',\n        id: 'b-undo',\n        tag: 'UNDO',\n        label: 'Undo',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.undo\n      }, {\n        type: 'edit',\n        id: 'b-redo',\n        tag: 'REDO',\n        label: 'Redo',\n        icon: _icons_js__WEBPACK_IMPORTED_MODULE_5__.redo\n      }];\n      var customToolbar = toolbar.filter(function (item) {\n        if (item.type == 'block' || item.type == 'list' || item.type == 'inline') {\n          return options.elements.includes(item.tag);\n        } else {\n          return true;\n        }\n\n        return false;\n      });\n      this.toolbar = [].concat(_toConsumableArray(customToolbar), _toConsumableArray(options.plugins));\n      console.log('toolbar', this.toolbar);\n    } // -----------------------------------------------------------------------------\n    // @section Mouse up events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForMouseUpEvents\",\n    value: function listenForMouseUpEvents() {\n      var _this2 = this;\n\n      this.editorNode.addEventListener('mouseup', function () {\n        return _this2.handleMouseUp(true);\n      }); // Use timeout on blur so buttons still active when first clicked from editor\n\n      this.editorNode.addEventListener('blur', function () {\n        setTimeout(function () {\n          return _this2.handleMouseUp(false);\n        }, 500);\n      });\n    } // -----------------------------------------------------------------------------\n    // @section Toolbar button events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForToolbarButtonClicks\",\n    value: function listenForToolbarButtonClicks() {\n      var _this3 = this;\n\n      this.toolbar.forEach(function (button) {\n        button.element = _this3.toolbarNode.querySelector(\"#\".concat(button.id));\n        button.element.disabled = true;\n\n        if (\"disable\" in button) {\n          button.disable(button.element);\n        }\n\n        button.element.addEventListener('click', function (event) {\n          // @todo This does not work for custom buttons where bootstrap gets in first\n          //       Therefore need to add relevant attributes on selection taking place\n          if (_this3.range === false) {\n            event.preventDefault();\n            return;\n          }\n\n          _this3.clickToolbarButton(event.currentTarget);\n        });\n      });\n    }\n  }, {\n    key: \"clickToolbarButton\",\n    value: function clickToolbarButton(element) {\n      var clicked = this.toolbar.find(function (button) {\n        return button.id == element.id;\n      });\n\n      if (clicked.type == 'block') {\n        _block_js__WEBPACK_IMPORTED_MODULE_3__.click(clicked, this.range, this.editorNode);\n        this.updateEventHandlers();\n      } else if (clicked.type == 'list') {\n        _block_js__WEBPACK_IMPORTED_MODULE_3__.click(clicked, this.range, this.editorNode);\n        this.updateEventHandlers();\n      } else if (clicked.type == 'inline') {\n        _inline_js__WEBPACK_IMPORTED_MODULE_4__.click(clicked, this.range, this.editorNode);\n        this.updateEventHandlers();\n      } else if (clicked.type == 'edit') {\n        if (this.buffer.click(clicked)) {\n          this.updateEventHandlers();\n        }\n      } else if (clicked.type == 'custom') {\n        console.log('clicked custom button', clicked.id, 'with range', this.range);\n        clicked.click(this.range);\n      }\n\n      this.range == false;\n    } // -----------------------------------------------------------------------------\n    // @section Keydown events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForKeydownEvents\",\n    value: function listenForKeydownEvents() {\n      var _this4 = this;\n\n      this.editorNode.addEventListener('keydown', function (event) {\n        console.log('control key?', event.ctrlKey);\n        console.log('key', event.key); // Custom panel shown - ignore key entry?\n\n        if (document.querySelector('.custom-panel') != null) {\n          event.preventDefault(); // Override normal browser enter key action\n        } else if (event.key == 'Enter') {\n          if (_this4.handleEnter()) {\n            event.preventDefault();\n          } // Prevent deletion of customised blocks\n\n        } else if (event.key == 'Backspace' || event.key == 'Delete' || event.ctrlKey && event.key == 'd') {\n          if (_this4.handleDelete(event.key)) {\n            event.preventDefault();\n          } // Capture undo/redo events\n\n        } else if ((event.ctrlKey || event.metaKey) && event.key == 'z') {\n          event.preventDefault(); // Redo\n\n          if (event.shiftKey) {\n            if (_this4.buffer.redo()) {\n              _this4.updateEventHandlers();\n            } // Undo\n\n          } else {\n            if (_this4.buffer.undo()) {\n              _this4.updateEventHandlers();\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"handleEnter\",\n    value: function handleEnter() {\n      var range = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getRange();\n\n      if (range === false) {\n        return;\n      }\n\n      var custom = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.isCustom(range.blockParent);\n      var endNormal = range.endContainer.textContent.trim().length == range.endOffset;\n      var handled = false;\n\n      if (custom || endNormal) {\n        var p = document.createElement('P');\n        p.innerText = '\\n';\n        p = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.insertAfter(p, range.blockParent);\n        _helpers_js__WEBPACK_IMPORTED_MODULE_2__.setCursor(p, 0);\n        handled = true;\n      }\n\n      if (custom) {\n        this.highlightCustomNode(false);\n      }\n\n      return handled;\n    }\n    /**\n     * \n     * @returns boolean true if need to prevent default action\n     */\n\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(key) {\n      if (key == 'd') {\n        key = 'Delete';\n      }\n\n      var range = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getRange();\n      console.log('range=', range);\n\n      if (range) {\n        var example = this.toolbar.find(function (button) {\n          return button.type === 'custom';\n        });\n        var title = 'Information';\n        var message = \"To delete a custom element (such as an \".concat(example.tag, \") you need to edit it by clicking it and choosing Delete.\"); // Single selection\n\n        if (range.collapsed) {\n          console.log('Single selection');\n          console.log('range length', range.endContainer.textContent.trim().length);\n          console.log('range endOffset', range.endOffset); // Check for back spacing from a single selection point\n\n          if (key == 'Backspace' && range.startOffset == 0) {\n            // Back spacing into a non-editable block?\n            var previous = range.blockParent.previousElementSibling;\n\n            if (previous && previous.innerHTML.includes('contenteditable=\"false\"')) {\n              _feedback_js__WEBPACK_IMPORTED_MODULE_1__.show(title, message);\n              return true;\n            } // Forward delete in a none-editable block?\n\n          } else if (key == 'Delete' && range.endContainer.textContent.trim().length == range.endOffset) {\n            console.log('Deleting from end container');\n            var next = range.endContainer.nextElementSibling;\n            console.log('next', next);\n\n            if (next && next.getAttribute(\"contenteditable\") == 'false') {\n              _feedback_js__WEBPACK_IMPORTED_MODULE_1__.show(title, message);\n              return true;\n            }\n          } // Back spacing or deleting in a multiple selection\n\n        } else {\n          // Loop from start container to end container checking for a non-editable block\n          var parent = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getParentBlockNode(range.startContainer);\n          var endParent = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getParentBlockNode(range.endContainer);\n\n          while (parent !== endParent) {\n            if (parent.innerHTML.includes('contenteditable=\"false\"')) {\n              _feedback_js__WEBPACK_IMPORTED_MODULE_1__.show(title, message);\n              return true;\n            }\n\n            parent = parent.nextElementSibling;\n          }\n        }\n      }\n\n      return false;\n    } // -----------------------------------------------------------------------------\n    // @section Keyup events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForKeyupEvents\",\n    value: function listenForKeyupEvents() {\n      var _this5 = this;\n\n      this.handleKeyup = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.debounce(this.handleKeyupDelayed, 500);\n      this.editorNode.addEventListener('keyup', function () {\n        return _this5.handleKeyup(_this5);\n      });\n    }\n  }, {\n    key: \"handleKeyupDelayed\",\n    value: function handleKeyupDelayed() {\n      //console.log('Updating buffer with arg[0]',args[0])\n      var editor = arguments.length <= 0 ? undefined : arguments[0];\n      editor.buffer.update();\n    } // -----------------------------------------------------------------------------\n    // @section Custom events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForCustomEvents\",\n    value: function listenForCustomEvents() {\n      var _this6 = this;\n\n      // Do any custom setup required\n      this.toolbar.forEach(function (button) {\n        if (button.type === 'custom') {\n          if (\"setup\" in button) {\n            button.setup(_this6.editorNode, true);\n          }\n\n          if (\"shortcut\" in button && \"click\" in button) {\n            _this6.editorNode.addEventListener('keydown', function (event) {\n              if (event.key === button.shortcut) {\n                // Prevent default so key not echo'd to the screen\n                event.preventDefault(); // Stop propagation to prevent other event handlers responding\n\n                event.stopPropagation(); // Trigger the dialogue\n\n                button.click(_this6.range);\n              }\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"updateEventHandlers\",\n    value: function updateEventHandlers() {\n      var _this7 = this;\n\n      this.toolbar.forEach(function (button) {\n        if ('addEventHandlers' in button) {\n          button.addEventHandlers(_this7.editorNode);\n        }\n      });\n    } // -----------------------------------------------------------------------------\n    // @section Paste events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"listenForPasteEvents\",\n    value: function listenForPasteEvents() {\n      var _this8 = this;\n\n      var events = ['cut', 'copy', 'paste'];\n      events.forEach(function (evt) {\n        return _this8.editorNode.addEventListener(evt, function (event) {\n          if (_this8.handleCutCopyPaste()) {\n            event.preventDefault();\n          } // Update buffer\n\n\n          setTimeout(function () {\n            return _this8.handleKeyup(_this8);\n          }, 1);\n        });\n      });\n    }\n  }, {\n    key: \"handleCutCopyPaste\",\n    value: function handleCutCopyPaste() {\n      console.log('Detected cut-copy-paste event');\n      var range = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getRange(); // Ensure have a range that is not collapsed\n\n      if (range == false || range.collapsed) {\n        return false;\n      } // Loop from start container to end container checking for a non-editable block\n\n\n      var parent = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getParentBlockNode(range.startContainer);\n      var endParent = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getParentBlockNode(range.endContainer);\n\n      while (parent !== endParent) {\n        if (parent.innerHTML.includes('contenteditable=\"false\"')) {\n          var example = this.toolbar.find(function (button) {\n            return button.type === 'custom';\n          });\n          var title = 'Information';\n          var message = \"Cut, copy and paste (of/over) selections with custom elements (such as \".concat(example.tag, \"s) is not supported. Please modify your selection and try again.\");\n          _feedback_js__WEBPACK_IMPORTED_MODULE_1__.show(title, message);\n          return true;\n        }\n\n        parent = parent.nextElementSibling;\n      }\n\n      return false;\n    } // -----------------------------------------------------------------------------\n    // @section Mouseup events\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(focus) {\n      var _this9 = this;\n\n      console.log('Handle mouse up with focus = ', focus);\n      this.range = false;\n\n      if (focus) {\n        this.range = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.getRange();\n      }\n\n      var formats;\n\n      if (this.range !== false) {\n        // If enter cursor in an empty editor then make this a paragraph\n        // rather than raw text\n        if (this.range.blockParent == this.editorNode && this.editorNode.innerText == '') {\n          this.insertParagraph();\n        } // Highlight custom blocks\n\n\n        if (_helpers_js__WEBPACK_IMPORTED_MODULE_2__.isCustom(this.range.blockParent)) {\n          this.highlightCustomNode(this.range.blockParent);\n        }\n\n        console.log('handleMouseUp range=', this.range);\n        formats = _helpers_js__WEBPACK_IMPORTED_MODULE_2__.appliedFormats(this.range.startContainer, this.editorNode, this.range.rootNode, '');\n        console.log('Applied formats', formats);\n      }\n\n      this.toolbar.forEach(function (button) {\n        var element = button.element; // Ignore none ranges\n\n        if (_this9.range === false) {\n          element.disabled = true;\n        } else {\n          element.disabled = false;\n\n          switch (button.type) {\n            case 'block':\n              formats.push(_this9.range.blockParent.tagName);\n\n            case 'list':\n              element.removeAttribute('disabled');\n              break;\n\n            case 'inline':\n              if (_this9.range.blockParent == _this9.editorNode) {\n                console.log('setting element to be disabled', element.title);\n                element.disabled = true;\n              } else {\n                element.removeAttribute('disabled');\n              }\n\n              break;\n\n            case 'custom':\n              element.removeAttribute('disabled');\n              break;\n          } // Check whether selection means button should be shown as active or not\n\n\n          if (formats.includes(button.tag)) {\n            element.classList.add('active');\n            element.setAttribute('data-active', true);\n            element.setAttribute('aria-pressed', 'true');\n          } else {\n            element.classList.remove('active');\n            element.removeAttribute('data-active');\n            element.removeAttribute('aria-pressed');\n          }\n\n          if (element.disabled) {\n            console.log('setting element to be inactive', element.title);\n          } else {\n            console.log('setting element to be active', element.title);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"insertParagraph\",\n    value: function insertParagraph() {\n      var p = document.createElement('P'); // Create a placeholder to ensure set cursor works\n\n      p.innerText = '\\n';\n      p = this.editorNode.appendChild(p);\n      _helpers_js__WEBPACK_IMPORTED_MODULE_2__.setCursor(p, 0);\n    } // -----------------------------------------------------------------------------\n    // @section Other methods\n    // -----------------------------------------------------------------------------\n\n  }, {\n    key: \"getCleanData\",\n    value: function getCleanData(content) {\n      var node;\n\n      if (content !== undefined) {\n        node = document.createElement('div');\n        node.innerHTML = content;\n      } else {\n        node = this.editorNode.cloneNode(true);\n      }\n\n      var customButtons = this.toolbar.filter(function (button) {\n        return button.type === 'custom';\n      });\n      _helpers_js__WEBPACK_IMPORTED_MODULE_2__.cleanForSaving(node, customButtons);\n      return node.innerHTML;\n    }\n  }, {\n    key: \"highlightCustomNode\",\n    value: function highlightCustomNode(node) {\n      var customs = this.editorNode.querySelectorAll('[contenteditable=false]');\n      customs.forEach(function (custom) {\n        return custom.classList.remove('selected');\n      });\n\n      if (node) {\n        node.classList.add('selected');\n      }\n    }\n  }]);\n\n  return Editor;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Editor);\n\n//# sourceURL=webpack://AJE/./src/js/Editor.js?");

/***/ }),

/***/ "./src/js/block.js":
/*!*************************!*\
  !*** ./src/js/block.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"click\": () => (/* binding */ click)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"./src/js/helpers.js\");\n/* harmony import */ var _phase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./phase.js */ \"./src/js/phase.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\nvar editorNode;\nvar formatType = '';\nvar formatAction = '';\nvar newFormat = '';\nvar previousFormats = [];\nvar lastNodeAdded = false;\nvar fragmentNode;\n\nfunction getListAndBlockFormats(node, formats) {\n  // Always set old formats to the original\n  var oldFormats = [].concat(_toConsumableArray(formats.oldFormats), [node.tagName]);\n  var newFormats = []; // Pre and post phases\n\n  if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.pre() || _phase_js__WEBPACK_IMPORTED_MODULE_1__.post()) {\n    // console.log(`1. Pushing ${node.tagName} to formats`)\n    newFormats = [].concat(_toConsumableArray(formats.newFormats), [node.tagName]);\n    return {\n      newFormats: newFormats,\n      oldFormats: oldFormats\n    };\n  } // During phase\n  //\n  // New block formatting (not list)\n\n\n  if (formatType == 'block') {\n    // console.log(`Format type = ${this.formatType}`)\n    // console.log(`2. new block format ${this.newFormat}`)\n    newFormats = [newFormat];\n    return {\n      newFormats: newFormats,\n      oldFormats: oldFormats\n    };\n  } // New list formatting\n\n\n  if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.first()) {\n    // console.log(`3. First node with new list format ${newFormat}`)\n    // Reformatting a list item?\n    if (node.tagName == 'LI') {\n      // console.log('3.1 Processing LI')\n      var parentListContainer = node.parentNode; // First in list - in which case modify list type\n\n      if (parentListContainer.firstElementChild == node) {\n        // console.log( '3.1.1 First item in a list - replace existing list')\n        newFormats.pop();\n        newFormats.push(newFormat);\n        newFormats.push('LI'); // console.log('3.1.2 new list formats', formats.newFormats.join(' '))\n        // Else create a new indented list\n      } else {\n        // console.log( '3.1.3 Subsequent item in a list - indent a new list')\n        newFormats.push('LI');\n        newFormats.push(newFormat);\n        newFormats.push('LI'); // console.log('3.1.4 new list formats', formats.newFormats.join(' '))\n      } // This is a different block node (e. H1, P) or a list container node - therefore start a new list\n\n    } else {\n      // console.log( 'Converting a block node')\n      newFormats.push(newFormat);\n      newFormats.push('LI'); // console.log('3.2 new list formats', formats.newFormats.join(' '))\n    }\n\n    return {\n      newFormats: newFormats,\n      oldFormats: oldFormats\n    };\n  } // During but not first node phase - reuse previously define list formats\n\n\n  newFormats = previousFormats.slice(); // console.log(`4. Reusing initial list formatting ${formats.newFormats.join(' ')}`)\n\n  return {\n    newFormats: newFormats,\n    oldFormats: oldFormats\n  };\n} // @todo Could go into Helpers\n\n\nfunction getBlockHTML(node) {\n  var html = ''; // Extract all text, inline formats and protected node content from the node\n\n  node.childNodes.forEach(function (child) {\n    // Plain text node\n    if (child.nodeType === 3) {\n      var text = child.textContent; // Trim text nodes with CR's\n\n      if (text.includes('\\n')) {\n        text = text.trim();\n      }\n\n      html += text; // Inline or custom node\n    } else if (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInline(child) || _helpers_js__WEBPACK_IMPORTED_MODULE_0__.isCustom(child)) {\n      html += child.outerHTML;\n    }\n  });\n  return html;\n}\n\nfunction saveBlockContent(node, formats) {\n  var n;\n  var target = fragmentNode;\n  var html = getBlockHTML(node);\n  var currentFormats = [];\n\n  if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.during()) {\n    currentFormats = formats.newFormats;\n  } else {\n    currentFormats = formats.oldFormats;\n  }\n\n  var lastFormat = currentFormats.slice(-1)[0]; // console.log('html',html)\n  // Don't include what? @todo rest of comment!\n\n  if (html == '' && node.innerHTML.includes('<')) {\n    return;\n  } // First time - apply all formats\n\n\n  if (previousFormats.length == 0) {\n    // console.log('0. Original target',target.outerHTML)\n    currentFormats.forEach(function (format) {\n      n = document.createElement(format);\n      target = target.appendChild(n);\n      console.log('1. First content - moving target to', target.outerHTML);\n    }); // New tree larger and the previous formats are a subset?\n    // Compare formatting and add to appropriate end of tree\n  } else if (currentFormats.length > previousFormats.length) {\n    // console.log('2. Current formats longer than previous formats')\n    if (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.arraySubset(previousFormats, currentFormats)) {\n      // console.log('2.1 Current formats are a superset of previous formats')\n      for (var i = 0; i < previousFormats.length; i++) {\n        target = target.lastElementChild;\n        console.log('2.2 New formats superset - moving target to', target.outerHTML);\n      }\n\n      for (var _i = previousFormats.length; _i < currentFormats.length; _i++) {\n        n = document.createElement(currentFormats[_i]);\n        target = target.appendChild(n);\n        console.log('2.3 New formats superset - moving target to', target.outerHTML);\n      }\n    } // Formatting is the same as previously\n\n  } else if (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.arraysEqual(currentFormats, previousFormats)) {\n    if (lastNodeAdded && lastNodeAdded != fragmentNode) {\n      target = lastNodeAdded.parentNode;\n    }\n\n    n = document.createElement(lastFormat);\n    target = target.appendChild(n); // console.log('3. Formats equal - moving target to',target.outerHTML)\n  } // New formatting smaller or different - find where in tree to append\n\n\n  if (target == fragmentNode) {\n    // console.log('4. New formatting smaller or different')\n    var startIndex = 0;\n    currentFormats.forEach(function (format, index) {\n      if (format == previousFormats[index]) {\n        // Exclude the last format if it is an LI as we need \n        // to add the LI to the previous list parent\n        if ((index == currentFormats.length - 1 && format == 'LI') == false) {\n          target = target.lastElementChild; // console.log('4.1 Move target node to', target.outerHTML)\n\n          startIndex++;\n        }\n      }\n    });\n\n    for (var _i2 = startIndex; _i2 < currentFormats.length; _i2++) {\n      n = document.createElement(currentFormats[_i2]);\n      target = target.appendChild(n); // console.log('4.2 Starting new formats - moving target to',target.outerHTML)\n    }\n  }\n\n  lastNodeAdded = target;\n  previousFormats = currentFormats.slice(); // Add the content\n\n  if (html != '') {\n    target.innerHTML = html; // console.log('target with new content', target.outerHTML)\n    // console.log('fragmentNode',fragmentNode.innerHTML)\n  }\n}\n\nfunction parseListsAndBlocks(node, formats) {\n  // console.log( `%cparseListsAndBlocks ${node.tagName}`,'background:green;color:white;padding:0.5rem')\n  // console.log( `HTML [${node.innerHTML.trim()}]`)\n  // console.log( `node formats on entry`,formats.oldFormats)\n  // Define the formats for this node only\n  var nodeFormats = {\n    oldFormats: [],\n    newFormats: []\n  };\n\n  if (node != editorNode) {\n    _phase_js__WEBPACK_IMPORTED_MODULE_1__.set(node); // Get the old and new formats\n    //nodeFormats = { ... getListAndBlockFormats( node, {...formats} ) }\n\n    nodeFormats = getListAndBlockFormats(node, formats); // console.log( `old node formats`,nodeFormats.oldFormats)\n    // console.log( `new node formats`,nodeFormats.newFormats)\n    // Save content of text nodes and protected nodes\n    // saveBlockContent( node, {...nodeFormats} )\n\n    saveBlockContent(node, nodeFormats);\n  }\n\n  if (node.childNodes.length == 0) {\n    //console.log('Finished parsing this branch')\n    return;\n  }\n\n  node.childNodes.forEach(function (child) {\n    if (child.nodeType !== 3 && _helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInline(child) == false && _helpers_js__WEBPACK_IMPORTED_MODULE_0__.isCustom(child) == false) {\n      // console.log(`Moving to child[${children}] ${child.tagName}`)\n      // parseListsAndBlocks( child, {...odeFormats}  ) \n      parseListsAndBlocks(child, nodeFormats);\n    }\n  }); // console.log(`Finished this branch - processed ${children} children`)\n}\n\nvar click = function click(button, range, editor) {\n  // Initialisation\n  editorNode = editor;\n  formatType = button.type;\n  formatAction = 'apply';\n\n  if (button.tag == 'CLEAR' || button.element.getAttribute('data-active')) {\n    formatAction = 'remove';\n  } // console.log('Format action', formatAction)\n\n\n  newFormat = button.tag;\n\n  if (button.type == 'block' && formatAction == 'remove') {\n    newFormat = 'P';\n  }\n\n  previousFormats = [];\n  lastNodeAdded = false;\n  range.rootNode = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getTopParentNode(range.rootNode, editorNode);\n  var firstParentNode = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getTopParentNode(range.startContainer, editorNode);\n  var endParentNode = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getTopParentNode(range.endContainer, editorNode); // Init phase for block formatting\n\n  _phase_js__WEBPACK_IMPORTED_MODULE_1__.init(range, true); // console.log(`%creFormatBlock with new format ${button.tag}`,'background-color:red;color:white;padding:0.5rem')\n  //\n  // Just parse the root node if the start and end belong to the same parent\n\n  if (firstParentNode == endParentNode) {\n    fragmentNode = document.createElement('DIV');\n    parseListsAndBlocks(range.rootNode, {\n      oldFormats: [],\n      newFormats: []\n    }); // console.log( 'fragment', fragmentNode.innerHTML)\n\n    if (range.rootNode == editorNode) {\n      range.rootNode.innerHTML = fragmentNode.innerHTML;\n    } else {\n      range.rootNode.outerHTML = fragmentNode.innerHTML;\n    }\n  } else {\n    var startNodeFound = false;\n    var endNodeFound = false;\n    fragmentNode = document.createElement('DIV');\n    range.rootNode.childNodes.forEach(function (node) {\n      if (node.nodeType === 3) {\n        return;\n      }\n\n      if (node == firstParentNode) {\n        startNodeFound = true;\n      }\n\n      if (startNodeFound && endNodeFound == false) {\n        // console.log( `%cparse top level node ${node.tagName}`,'background:orange;color:white;padding:0.5rem')\n        // Check for block (as opposed to list formatting)\n        if (formatType == 'block') {\n          previousFormats = [];\n          lastNodeAdded = false;\n          fragmentNode = document.createElement('DIV');\n        }\n\n        parseListsAndBlocks(node, {\n          oldFormats: [],\n          newFormats: []\n        });\n\n        if (button.type == 'block') {\n          // console.log( 'fragment', this.fragmentNode.innerHTML)\n          node.outerHTML = fragmentNode.innerHTML;\n        } else {\n          node.setAttribute('data-remove', true);\n        }\n      }\n\n      if (node == endParentNode) {\n        endNodeFound = true;\n\n        if (button.type == 'list') {\n          // console.log( 'fragment', this.fragmentNode.innerHTML)\n          node.outerHTML = fragmentNode.innerHTML;\n        }\n\n        var removeNodes = editorNode.querySelectorAll('[data-remove=true]');\n        removeNodes.forEach(function (removeNode) {\n          return removeNode.remove();\n        });\n      }\n    });\n  }\n};\n\n//# sourceURL=webpack://AJE/./src/js/block.js?");

/***/ }),

/***/ "./src/js/buffer.js":
/*!**************************!*\
  !*** ./src/js/buffer.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Buffer)\n/* harmony export */ });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Buffer = /*#__PURE__*/function () {\n  function Buffer(size, target) {\n    _classCallCheck(this, Buffer);\n\n    this.size = size;\n    this.bufferIndex = 0;\n    this.target = target;\n    this.buffer = [this.target.innerHTML];\n  }\n\n  _createClass(Buffer, [{\n    key: \"update\",\n    value: function update() {\n      if (this.buffer.length > this.size) {\n        // Remove first element\n        this.buffer.shift();\n      } // Check buffer index in case need to reset buffer when the user had\n      // undone and then made new changes\n\n\n      if (this.bufferIndex + 1 < this.buffer.length) {\n        var items = this.buffer.length - (this.bufferIndex + 1);\n\n        for (var i = 0; i < items; i++) {\n          this.buffer.pop();\n        }\n      } // Add the new one\n\n\n      this.buffer.push(this.target.innerHTML);\n      this.bufferIndex = this.buffer.length - 1;\n      console.log('buffer', this.buffer);\n    }\n  }, {\n    key: \"undo\",\n    value: function undo() {\n      console.log('handle undo with buffer index', this.bufferIndex);\n\n      if (this.bufferIndex > 0) {\n        this.bufferIndex--;\n        this.target.innerHTML = this.buffer[this.bufferIndex];\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"redo\",\n    value: function redo() {\n      console.log('handle redo with buffer index', this.bufferIndex);\n\n      if (this.bufferIndex + 1 < this.buffer.length) {\n        this.bufferIndex++;\n        this.target.innerHTML = this.buffer[this.bufferIndex];\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"click\",\n    value: function click(button) {\n      console.log('Handling edit');\n\n      switch (button.id) {\n        case 'b-undo':\n          return this.undo();\n\n        case 'b-redo':\n          return this.redo();\n      }\n\n      return false;\n    }\n  }]);\n\n  return Buffer;\n}();\n\n\n\n//# sourceURL=webpack://AJE/./src/js/buffer.js?");

/***/ }),

/***/ "./src/js/feedback.js":
/*!****************************!*\
  !*** ./src/js/feedback.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"show\": () => (/* binding */ show)\n/* harmony export */ });\nfunction remove() {\n  var panel = document.querySelector('.custom-panel').remove();\n}\n\nfunction hide() {\n  var form = document.querySelector('.custom-form').classList.remove('show');\n}\n\nfunction delayed() {\n  var form = document.querySelector('.custom-form');\n  form.classList.add('show');\n  form.querySelector('button').focus();\n}\n\nfunction template(title, message) {\n  return \"\\n        <div class=\\\"custom-form w-75 bg-white p-3 rounded\\\">\\n            <div class=\\\"header\\\">\\n                <h5 class=\\\"title\\\">\".concat(title, \"</h5>\\n            </div>\\n            <div class=\\\"message border-top border-bottom pt-3 pb-3\\\">\").concat(message, \"</div>\\n            <div class=\\\"mt-3\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-success close\\\">Close</button>\\n            </div>\\n        </div>\");\n}\n\nvar show = function show(title, message) {\n  var panel = document.createElement('DIV');\n  panel.classList.add('custom-panel');\n  panel.innerHTML = template(title, message);\n  var button = panel.querySelector('button');\n  panel.addEventListener('click', function () {\n    hide();\n    setTimeout(remove, 100);\n  });\n  document.body.appendChild(panel);\n  setTimeout(delayed, 1);\n};\n\n//# sourceURL=webpack://AJE/./src/js/feedback.js?");

/***/ }),

/***/ "./src/js/helpers.js":
/*!***************************!*\
  !*** ./src/js/helpers.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"arraysEqual\": () => (/* binding */ arraysEqual),\n/* harmony export */   \"arraySubset\": () => (/* binding */ arraySubset),\n/* harmony export */   \"insertAfter\": () => (/* binding */ insertAfter),\n/* harmony export */   \"isInline\": () => (/* binding */ isInline),\n/* harmony export */   \"isList\": () => (/* binding */ isList),\n/* harmony export */   \"isBlock\": () => (/* binding */ isBlock),\n/* harmony export */   \"isCustom\": () => (/* binding */ isCustom),\n/* harmony export */   \"getParentBlockNode\": () => (/* binding */ getParentBlockNode),\n/* harmony export */   \"getTopParentNode\": () => (/* binding */ getTopParentNode),\n/* harmony export */   \"cleanForSaving\": () => (/* binding */ cleanForSaving),\n/* harmony export */   \"getRange\": () => (/* binding */ getRange),\n/* harmony export */   \"setCursor\": () => (/* binding */ setCursor),\n/* harmony export */   \"debounce\": () => (/* binding */ debounce),\n/* harmony export */   \"appliedFormats\": () => (/* binding */ appliedFormats)\n/* harmony export */ });\n/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons */ \"./src/js/icons.js\");\n// -----------------------------------------------------------------------------\n// @section Arrays\n// -----------------------------------------------------------------------------\n\nvar arraysEqual = function arraysEqual(a, b) {\n  if (a.length != 0 && b.length != 0 && a.length != b.length) {\n    return false;\n  }\n\n  return a.every(function (item, index) {\n    return b[index] == item;\n  });\n};\nvar arraySubset = function arraySubset(a, b) {\n  return a.every(function (item, index) {\n    return b[index] == item;\n  });\n}; // -----------------------------------------------------------------------------\n// @section Dom manipulation\n// -----------------------------------------------------------------------------\n\nvar insertAfter = function insertAfter(newNode, existingNode) {\n  return existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);\n};\nvar isInline = function isInline(node) {\n  if (node.tagName == undefined) {\n    return false;\n  }\n\n  var tags = ['B', 'I', 'U'];\n  return tags.includes(node.tagName);\n};\nvar isList = function isList(node) {\n  if (node.tagName == undefined) {\n    return false;\n  }\n\n  var tags = ['UL', 'OL', 'LI'];\n  return tags.includes(node.tagName);\n};\nvar isBlock = function isBlock(node) {\n  if (node.tagName == undefined) {\n    return false;\n  } // const tags = ['DIV','H1','H2','H3','H4','H5','H6','P','LI']\n\n\n  var tags = ['DIV', 'H1', 'H2', 'P', 'LI'];\n  return tags.includes(node.tagName);\n};\nvar isCustom = function isCustom(node) {\n  // if ( node.tagName == undefined ){\n  //     return false\n  // }\n  // if ( isInline(node) || isBlock(node) || isList(node) ){\n  //     return false\n  // }\n  // if ( node.contenteditable == false ){\n  //     return false\n  // }\n  // return true\n  // @todo Check this is the correct test - i.e. quotes required\n  return node.contenteditable == 'false';\n};\nvar getParentBlockNode = function getParentBlockNode(node) {\n  // Keep going up the tree while the node is not a block node\n  // (the editor is a block node - a DIV)\n  while (isBlock(node) == false) {\n    node = node.parentNode;\n  }\n\n  return node;\n};\nvar getTopParentNode = function getTopParentNode(node, stopNode) {\n  // Return the stopNode if that is the first found\n  // Otherwise return the immediately below the stop node\n  var saved = node;\n\n  while (node != stopNode) {\n    saved = node;\n    node = node.parentNode;\n  }\n\n  return saved;\n};\nvar cleanForSaving = function cleanForSaving(node, buttons) {\n  // if ( node.nodeType === 1 && node.tagName == 'BLOCKQUOTE' ){\n  //     debugger\n  // }\n  // Trim text nodes with CR's\n  if (node.nodeType === 3) {\n    if (node.textContent.includes('\\n')) {\n      node.textContent = node.textContent.trim();\n    }\n\n    return;\n  } // Now strip anything other than a normal node\n\n\n  if (node.nodeType !== 1) {\n    node.remove();\n    return;\n  } // Remove anything we don't recognise\n\n\n  if (isBlock(node) === false && isList(node) === false && isInline(node) === false && isCustom(node) === false) {\n    node.remove();\n    return;\n  } // Handle custom nodes\n\n\n  if (buttons.length > 0 && isCustom(node)) {\n    // Does it require cleaning?\n    var match = buttons.find(function (button) {\n      return button.tag.toUpperCase() === node.tagName;\n    });\n\n    if (match && \"clean\" in match) {\n      var newNode = match.clean(node);\n      node.parentNode.replaceChild(newNode, node);\n    }\n\n    return;\n  } // Handle child nodes\n\n\n  node.childNodes.forEach(function (child) {\n    cleanForSaving(child, buttons);\n  });\n  return;\n}; // -----------------------------------------------------------------------------\n// @section Selection and keyboard methods\n// -----------------------------------------------------------------------------\n\nvar getRange = function getRange() {\n  // The selector is looking for a class used with modals so selections\n  // are ignored when modals are active\n  if (document.querySelector('.no-range-if-shown.show') === null) {\n    var sel = window.getSelection();\n\n    if (sel.rangeCount == 1) {\n      var range = sel.getRangeAt(0); // First parent node that is a block tag\n\n      range.blockParent = getParentBlockNode(range.commonAncestorContainer); // First parent node\n\n      range.rootNode = range.commonAncestorContainer;\n\n      if (range.commonAncestorContainer.nodeType === 3) {\n        range.rootNode = range.commonAncestorContainer.parentNode;\n      }\n\n      return range;\n    }\n  }\n\n  return false;\n};\nvar setCursor = function setCursor(node, offset) {\n  var range = document.createRange();\n  var selection = window.getSelection();\n  range.setStart(node, offset);\n  range.collapse(true);\n  selection.removeAllRanges();\n  selection.addRange(range);\n  return range;\n};\nvar debounce = function debounce(fn, delay) {\n  var timeOutId;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Clear previous timeout if not expired\n    if (timeOutId) {\n      clearTimeout(timeOutId);\n    } // Set new timeout\n\n\n    timeOutId = setTimeout(function () {\n      fn.apply(void 0, args);\n    }, delay);\n  };\n};\nvar appliedFormats = function appliedFormats(node, editorNode, rootNode, formatType) {\n  var formats = []; // Collect tags of appropriate type\n\n  while (node != editorNode && node != null) {\n    if (node.nodeType === 1) {\n      if (formatType == '') {\n        formats.unshift(node.tagName);\n      } else if (formatType == 'inline') {\n        if (isInline(node)) {\n          formats.unshift(node.tagName);\n        }\n      } else if (formatType == 'block') {\n        if (isBlock(node)) {\n          formats.unshift(node.tagName);\n        }\n      } else if (formatType == 'enter') {\n        formats.unshift(node);\n\n        if (node == rootNode) {\n          break;\n        }\n      }\n    }\n\n    node = node.parentNode;\n  } //console.log(`Applied formats = [${formats.join(' => ')}]`)\n\n\n  return formats;\n};\n\n//# sourceURL=webpack://AJE/./src/js/helpers.js?");

/***/ }),

/***/ "./src/js/icons.js":
/*!*************************!*\
  !*** ./src/js/icons.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"h1\": () => (/* binding */ h1),\n/* harmony export */   \"h2\": () => (/* binding */ h2),\n/* harmony export */   \"p\": () => (/* binding */ p),\n/* harmony export */   \"ol\": () => (/* binding */ ol),\n/* harmony export */   \"ul\": () => (/* binding */ ul),\n/* harmony export */   \"b\": () => (/* binding */ b),\n/* harmony export */   \"i\": () => (/* binding */ i),\n/* harmony export */   \"u\": () => (/* binding */ u),\n/* harmony export */   \"clear\": () => (/* binding */ clear),\n/* harmony export */   \"undo\": () => (/* binding */ undo),\n/* harmony export */   \"redo\": () => (/* binding */ redo),\n/* harmony export */   \"person\": () => (/* binding */ person),\n/* harmony export */   \"action\": () => (/* binding */ action),\n/* harmony export */   \"actionClosedIncomplete\": () => (/* binding */ actionClosedIncomplete),\n/* harmony export */   \"actionClosedComplete\": () => (/* binding */ actionClosedComplete),\n/* harmony export */   \"agreement\": () => (/* binding */ agreement),\n/* harmony export */   \"link\": () => (/* binding */ link),\n/* harmony export */   \"cross\": () => (/* binding */ cross),\n/* harmony export */   \"view\": () => (/* binding */ view),\n/* harmony export */   \"edit\": () => (/* binding */ edit),\n/* harmony export */   \"dots\": () => (/* binding */ dots),\n/* harmony export */   \"arrowRight\": () => (/* binding */ arrowRight),\n/* harmony export */   \"dashboardLarge\": () => (/* binding */ dashboardLarge),\n/* harmony export */   \"backArrowLarge\": () => (/* binding */ backArrowLarge)\n/* harmony export */ });\n/**\n * \n * This file includes source software from Bootstrap (https://icons.getbootstrap.com)\n * is MIT licenced which is reproduced here in full.\n * \n * The MIT License (MIT)\n *\n * Copyright (c) 2011-2018 Twitter, Inc.\n * Copyright (c) 2011-2018 The Bootstrap Authors\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n * Usage:\n * \n * These icons are form version 1.4.0\n * To add or modify icons, find the icon using the link above and then copy the path component of the svg source\n * \n */\n\n\nfunction icon(path, options) {\n  var width = 16;\n  var height = 16;\n  var scale = 1;\n\n  if (options != undefined) {\n    if (options.scale) {\n      scale = options.scale;\n      width = width * scale;\n      height = height * scale;\n    }\n  }\n\n  return \"\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(width, \"\\\" height=\\\"\").concat(height, \"\\\" viewBox=\\\"0 0 \").concat(width, \" \").concat(height, \"\\\" fill=\\\"currentColor\\\">\\n            <g transform=\\\"scale(\").concat(scale, \")\\\">\\n                \").concat(path, \"\\n            </g>\\n        </svg>\");\n}\n\nvar h1 = icon(\"\\n    <path d=\\\"M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z\\\"/>\\n\");\nvar h2 = icon(\"\\n    <path d=\\\"M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z\\\"/>\\n\");\nvar p = icon(\"\\n    <path d=\\\"M10.5 15a.5.5 0 0 1-.5-.5V2H9v12.5a.5.5 0 0 1-1 0V9H7a4 4 0 1 1 0-8h5.5a.5.5 0 0 1 0 1H11v12.5a.5.5 0 0 1-.5.5z\\\"/>\\n\");\nvar ol = icon(\"\\n    <path fill-rule=\\\"evenodd\\\" d=\\\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z\\\"/>\\n    <path d=\\\"M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z\\\"/>\\n\");\nvar ul = icon(\"\\n    <path fill-rule=\\\"evenodd\\\" d=\\\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\\\"/>\\n\");\nvar b = icon(\"\\n    <path d=\\\"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z\\\"/>\\n\");\nvar i = icon(\"\\n    <path d=\\\"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z\\\"/>\\n\");\nvar u = icon(\"\\n    <path d=\\\"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z\\\"/>\\n\");\nvar clear = icon(\"\\n    <path d=\\\"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547 3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z\\\"/>\\n\");\nvar undo = icon(\"\\n    <path d=\\\"M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z\\\"/>\\n\");\nvar redo = icon(\"\\n    <path d=\\\"M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z\\\"/>\\n\");\nvar person = icon(\"\\n    <path d=\\\"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z\\\"/>\\n\");\nvar action = icon(\"\\n    <path d=\\\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z\\\"/>\\n\");\nvar actionClosedIncomplete = icon(\"\\n    <path d=\\\"M5.164 14H15c-.299-.199-.557-.553-.78-1-.9-1.8-1.22-5.12-1.22-6 0-.264-.02-.523-.06-.776l-.938.938c.02.708.157 2.154.457 3.58.161.767.377 1.566.663 2.258H6.164l-1 1zm5.581-9.91a3.986 3.986 0 0 0-1.948-1.01L8 2.917l-.797.161A4.002 4.002 0 0 0 4 7c0 .628-.134 2.197-.459 3.742-.05.238-.105.479-.166.718l-1.653 1.653c.02-.037.04-.074.059-.113C2.679 11.2 3 7.88 3 7c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0c.942.19 1.788.645 2.457 1.284l-.707.707zM10 15a2 2 0 1 1-4 0h4zm-9.375.625a.53.53 0 0 0 .75.75l14.75-14.75a.53.53 0 0 0-.75-.75L.625 15.625z\\\"/>\\n\");\nvar actionClosedComplete = icon(\"\\n    <path d=\\\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z\\\"/>\\n\");\nvar agreement = icon(\"\\n    <path d=\\\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z\\\"/>\\n    <path d=\\\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z\\\"/>\\n\");\nvar link = icon(\"\\n    <path d=\\\"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\\\"/>\\n    <path d=\\\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z\\\"/>\\n\");\nvar cross = icon(\"\\n    <path d=\\\"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\\\"/>\\n\");\nvar view = icon(\"\\n    <path d=\\\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\\\"/>\\n    <path d=\\\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\\\"/>\\n\");\nvar edit = icon(\"\\n    <path d=\\\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\\\"/>\\n\");\nvar dots = icon(\"\\n    <path d=\\\"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\\\"/>\\n\");\nvar arrowRight = icon(\"\\n    <path fill-rule=\\\"evenodd\\\" d=\\\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\\\"/>\\n\");\nvar dashboardLarge = icon(\"\\n    <path d=\\\"M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z\\\"/>\\n    <path fill-rule=\\\"evenodd\\\" d=\\\"M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z\\\"/>\\n\", {\n  scale: 2\n});\nvar backArrowLarge = icon(\"\\n    <path d=\\\"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z\\\"/>\\n\", {\n  scale: 2\n}); // // Alternative approach approach\n// const icons = new Map()\n// icons.set('dashboard', `\n//     <path d=\"M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z\"/>\n//     <path fill-rule=\"evenodd\" d=\"M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z\"/>\n// `)\n// export const Icon = function( name, scaled ){\n//     icon = icons.get('dashboard')\n//     let width  = 16\n//     let height = 16\n//     let scale = 1\n//     if ( scaled != undefined ){\n//         scale = scaled\n//         width = width * scale\n//         height = height * scale\n//     }\n//     return `\n//         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" fill=\"currentColor\">\n//             <g transform=\"scale(${scale})\">\n//                 ${icon}\n//             </g>\n//         </svg>`\n// }\n\n//# sourceURL=webpack://AJE/./src/js/icons.js?");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Editor\": () => (/* binding */ Editor)\n/* harmony export */ });\n//import Editor from './Editor.js'\nvar Editor = __webpack_require__(/*! ./Editor.js */ \"./src/js/Editor.js\").default;\n\n\n\n//# sourceURL=webpack://AJE/./src/js/index.js?");

/***/ }),

/***/ "./src/js/inline.js":
/*!**************************!*\
  !*** ./src/js/inline.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"click\": () => (/* binding */ click)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"./src/js/helpers.js\");\n/* harmony import */ var _phase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./phase.js */ \"./src/js/phase.js\");\n\n\nvar editorNode;\nvar formatAction = '';\nvar newFormat = '';\nvar categorisedTextNodes = [];\nvar range;\nvar fragmentNode;\n\nfunction categoriseProtectedNode(node) {\n  var formats = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.appliedFormats(node, editorNode, range.rootNode, 'inline');\n  categorisedTextNodes.push({\n    node: node.cloneNode(true),\n    text: '',\n    formats: formats\n  });\n}\n\nfunction categoriseTextNode(node) {\n  console.log(\"Categorise text node [\".concat(node.textContent, \"]\")); // Get the [0] pre, [1]selected and [2]post text\n\n  var texts = getTextNodes(node); // console.log(`texts = [${texts.join(', ')}]`)\n\n  var formats = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.appliedFormats(node, editorNode, range.rootNode, 'inline'); // console.log(`current formats = [${formats.join(' ')}]`)\n  // Pre text\n\n  if (texts[0]) {\n    console.log(\"Adding pre text [\".concat(texts[0], \"]\"));\n    categorisedTextNodes.push({\n      node: false,\n      text: texts[0],\n      formats: formats\n    });\n  } // Selected text\n\n\n  if (texts[1]) {\n    var newFormats = formats.slice();\n\n    if (formatAction == 'apply') {\n      if (newFormats.includes(newFormat) == false) {\n        // console.log( `Adding new format [${newFormat}] in phase [${Phase.get()}]`)\n        newFormats.push(newFormat);\n      }\n    } else if (formatAction == 'remove') {\n      if (newFormat == 'CLEAR') {\n        newFormats = [];\n      } else {\n        newFormats = formats.filter(function (format) {\n          return format != newFormat;\n        });\n      }\n    } // console.log(`Adding selected text [${texts[1]}]`)\n\n\n    categorisedTextNodes.push({\n      node: false,\n      text: texts[1],\n      formats: newFormats\n    });\n  } // Post text\n\n\n  if (texts[2]) {\n    // console.log(`Adding post text [${texts[2]}]`)\n    categorisedTextNodes.push({\n      node: false,\n      text: texts[2],\n      formats: formats\n    });\n  }\n}\n\nfunction parseInlineNode(node) {\n  var n = false;\n  var t = false;\n  _phase_js__WEBPACK_IMPORTED_MODULE_1__.set(node); // Parent node\n\n  if (node.nodeType === 1) {\n    console.log(\"Parsing parent node\", node.outerHTML);\n\n    if (node.getAttribute('contenteditable') == 'false') {\n      categoriseProtectedNode(node);\n    } else {\n      node.childNodes.forEach(function (child) {\n        parseInlineNode(child);\n      });\n    }\n  } else if (node.nodeType === 3) {\n    categoriseTextNode(node);\n  }\n}\n\nfunction processCategorisedNodes() {\n  // Node list is as follows\n  // [i] = {node, text, formats, sorted}\n  // where node present for custom nodes like actions\n  // and sorted is the list of formats ordered\n  //\n  // Combine nodes with same formats or spaces (and no formats)\n  for (var i = 1; i < categorisedTextNodes.length; i++) {\n    var current = categorisedTextNodes[i];\n    var previous = categorisedTextNodes[i - 1];\n\n    if (previous.node == false && current.node == false) {\n      if (previous.sorted == current.sorted\n      /* || current.text == ' ' */\n      ) {\n          // Combine texts in current node\n          current.text = previous.text + current.text; // Bring formats forwad in case current text was a space (with no formats)\n\n          current.formats = previous.formats; // Clear previous text\n\n          previous.text = '';\n        }\n    }\n  } // Join remaining nodes with required formatting\n\n\n  categorisedTextNodes.forEach(function (node) {\n    // Just add custom nodes\n    if (node.node) {\n      fragmentNode.appendChild(node.node); // If have any text then add with formats\n    } else if (node.text != '') {\n      var n; // Build up format nodes\n\n      node.formats.forEach(function (format) {\n        var temp = document.createElement(format);\n\n        if (n) {\n          n = n.appendChild(temp);\n        } else {\n          n = temp;\n        }\n      }); // Add the text node\n\n      var t = document.createTextNode(node.text);\n\n      if (n) {\n        n.appendChild(t);\n      } else {\n        n = t;\n      } // Come back up the tree\n\n\n      while (n.parentNode !== null) {\n        n = n.parentNode;\n      } // Add to the node to the fragment            \n\n\n      fragmentNode.appendChild(n);\n    }\n  });\n}\n\nfunction getTextNodes(node) {\n  // Before, during and after texts\n  var texts = [];\n\n  if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.both()) {\n    texts.push(node.textContent.substring(0, range.startOffset));\n    texts.push(node.textContent.substring(range.startOffset, range.endOffset));\n    texts.push(node.textContent.substring(range.endOffset));\n  } else if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.first()) {\n    texts.push(node.textContent.substring(0, range.startOffset));\n    texts.push(node.textContent.substring(range.startOffset));\n    texts.push('');\n  } else if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.last()) {\n    texts.push('');\n    texts.push(node.textContent.substring(0, range.endOffset));\n    texts.push(node.textContent.substring(range.endOffset));\n  } else if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.during()) {\n    texts.push('');\n    texts.push(node.textContent);\n    texts.push('');\n  } else if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.pre()) {\n    texts.push(node.textContent);\n    texts.push('');\n    texts.push('');\n  } else if (_phase_js__WEBPACK_IMPORTED_MODULE_1__.post()) {\n    texts.push('');\n    texts.push('');\n    texts.push(node.textContent);\n  } // Check for trailing spaces\n\n\n  if (texts[2] == ' ') {\n    texts[2] = '';\n    texts[1] += ' ';\n  }\n\n  return texts;\n}\n\nfunction logCategorisedNodes(debug) {\n  var c = [];\n  categorisedTextNodes.forEach(function (n) {\n    // Sort the formats - for later comparison\n    n.formats.sort();\n    n.sorted = n.formats.join(' '); // List the nodes\n\n    var f = n.formats.join(' ');\n    c.push({\n      html: n.node ? n.node.outerHTML : '',\n      text: n.text,\n      formats: f,\n      sorted: n.sorted\n    });\n  });\n\n  if (debug) {\n    console.table(c);\n  }\n}\n\nvar click = function click(button, rng, editor) {\n  // Initialisation\n  range = rng;\n  editorNode = editor;\n  formatAction = 'apply';\n\n  if (button.tag == 'CLEAR' || button.element.getAttribute('data-active')) {\n    formatAction = 'remove';\n  } // console.log('Format action', formatAction)\n\n\n  newFormat = button.tag;\n  range.rootNode = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getTopParentNode(range.rootNode, editorNode); // The root node must be a block node (including list item LI) or an inline node\n\n  if (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isBlock(range.rootNode) == false && _helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInline(range.rootNode) == false) {\n    return;\n  } // Look for inline parent nodes that only have one child\n  // to ensure can clear all formats from selected text\n\n\n  while (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInline(range.rootNode.parentNode) && range.rootNode.parentNode.childNodes.length === 1) {\n    range.rootNode = range.rootNode.parentNode;\n  } // Reset fragment and categorised nodes\n\n\n  fragmentNode = document.createElement('DIV');\n  categorisedTextNodes = []; // Init phase for list formatting\n\n  _phase_js__WEBPACK_IMPORTED_MODULE_1__.init(range, false); // Parse\n\n  console.log('%cStarting inline parsing ...', 'background-color:red; color:white; padding:0.5rem;');\n  parseInlineNode(range.rootNode); // true = debugging\n\n  logCategorisedNodes(true); // Process saved nodes\n\n  processCategorisedNodes(); // Write out changes\n\n  if (_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInline(range.rootNode)) {\n    range.rootNode.outerHTML = fragmentNode.innerHTML;\n  } else {\n    range.rootNode.innerHTML = fragmentNode.innerHTML;\n  } // updateEventHandlers()\n  // console.log('fragmentNode', fragmentNode)\n\n};\n\n//# sourceURL=webpack://AJE/./src/js/inline.js?");

/***/ }),

/***/ "./src/js/phase.js":
/*!*************************!*\
  !*** ./src/js/phase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => (/* binding */ init),\n/* harmony export */   \"get\": () => (/* binding */ get),\n/* harmony export */   \"set\": () => (/* binding */ set),\n/* harmony export */   \"pre\": () => (/* binding */ pre),\n/* harmony export */   \"first\": () => (/* binding */ first),\n/* harmony export */   \"both\": () => (/* binding */ both),\n/* harmony export */   \"last\": () => (/* binding */ last),\n/* harmony export */   \"during\": () => (/* binding */ during),\n/* harmony export */   \"post\": () => (/* binding */ post)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"./src/js/helpers.js\");\n\nvar startContainer;\nvar endContainer;\nvar phase = '';\nvar init = function init(range, block) {\n  startContainer = range.startContainer;\n  endContainer = range.endContainer; // For block formatting start with block (not text nodes)\n\n  if (block) {\n    startContainer = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getParentBlockNode(startContainer);\n    endContainer = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.getParentBlockNode(endContainer);\n  }\n\n  phase = 'pre';\n};\nvar get = function get() {\n  return phase;\n}; // @todo This needs to move into helpes but need to pass in the range \n// or start and end containers (which could lose the block_or_inline param)\n// Would also need to pass in the current phase and return the new phase\n\nvar set = function set(node) {\n  // Adjust phase\n  if (node == startContainer) {\n    phase = 'first';\n\n    if (node == endContainer) {\n      phase = 'both';\n    }\n  } else if (node == endContainer) {\n    phase = 'last';\n  } else if (phase == 'first') {\n    phase = 'during';\n  } else if (phase == 'both' || phase == 'last') {\n    phase = 'post-first';\n  } else if (phase == 'post-first') {\n    phase = 'post';\n  }\n\n  console.log('New phase=', phase);\n};\nvar pre = function pre() {\n  return phase == 'pre';\n};\nvar first = function first() {\n  return phase == 'first' || phase == 'both';\n};\nvar both = function both() {\n  return phase == 'both';\n};\nvar last = function last() {\n  return phase == 'last';\n};\nvar during = function during() {\n  return phase == 'during' || phase == 'first' || phase == 'last' || phase == 'both';\n};\nvar post = function post() {\n  return phase == 'post-first' || phase == 'post';\n};\n\n//# sourceURL=webpack://AJE/./src/js/phase.js?");

/***/ }),

/***/ "./src/js/templates.js":
/*!*****************************!*\
  !*** ./src/js/templates.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editor\": () => (/* binding */ editor)\n/* harmony export */ });\nfunction editorToolbarButton(button) {\n  var type = button.type,\n      id = button.id,\n      label = button.label,\n      icon = button.icon;\n\n  if (button.attr === undefined) {\n    button.attr = '';\n  } // e.g. icon \"bi-eye\"\n  // data-bs-toggle=\"button\" allows the active state to be shown by adding\n  // the class \"active\" and aria-pressed=\"true\"(for assistive tech)\n\n\n  return \"\\n        <button id=\\\"\".concat(id, \"\\\" type=\\\"button\\\" class=\\\"btn btn-light \").concat(type, \"\\\" \\n            \").concat(button.attr, \" aria-label=\\\"\").concat(label, \"\\\" title=\").concat(label, \">\\n            \").concat(icon, \"\\n        </button>\");\n}\n\nfunction editorToolbar(buttons) {\n  var htmlButtons = {\n    block: '',\n    list: '',\n    inline: '',\n    edit: '',\n    custom: ''\n  };\n  buttons.forEach(function (button) {\n    switch (button.type) {\n      case 'block':\n        htmlButtons.block += editorToolbarButton(button);\n        break;\n\n      case 'list':\n        htmlButtons.list += editorToolbarButton(button);\n        break;\n\n      case 'inline':\n        htmlButtons.inline += editorToolbarButton(button);\n        break;\n\n      case 'edit':\n        htmlButtons.edit += editorToolbarButton(button);\n        break;\n\n      case 'custom':\n        htmlButtons.custom += editorToolbarButton(button);\n        break;\n    }\n  });\n  return htmlButtons;\n}\n\nvar editor = function editor(buttons, preferences) {\n  var buttonsHTML = editorToolbar(buttons);\n  var html = [];\n\n  if (buttonsHTML.block) {\n    html.push(\"<div class=\\\"editor-toolbar-group block\\\" role=\\\"group\\\" aria-label=\\\"Block format buttons\\\">\".concat(buttonsHTML.block, \"</div>\"));\n  }\n\n  if (buttonsHTML.list) {\n    html.push(\"<div class=\\\"editor-toolbar-group list\\\" role=\\\"group\\\" aria-label=\\\"List format buttons\\\">\".concat(buttonsHTML.list, \"</div>\"));\n  }\n\n  if (buttonsHTML.inline) {\n    html.push(\"<div class=\\\"editor-toolbar-group inline\\\" role=\\\"group\\\" aria-label=\\\"Inline format buttons\\\">\".concat(buttonsHTML.inline, \"</div>\"));\n  }\n\n  if (buttonsHTML.edit) {\n    html.push(\"<div class=\\\"editor-toolbar-group edit\\\" role=\\\"group\\\" aria-label=\\\"Edit buttons\\\">\".concat(buttonsHTML.edit, \"</div>\"));\n  }\n\n  if (buttonsHTML.custom) {\n    html.push(\"<div class=\\\"editor-toolbar-group custom\\\" role=\\\"group\\\" aria-label=\\\"Custom buttons\\\">\".concat(buttonsHTML.custom, \"</div>\"));\n  }\n\n  var classes = '';\n\n  if (preferences.headingNumbers == 'on') {\n    classes += 'heading-numbers';\n  }\n\n  return \"\\n        <div class=\\\"editor-container\\\">\\n            <div class=\\\"editor-toolbar\\\">\\n                \".concat(html.join('<span class=\"editor-toolbar-group-separator\">|</span>'), \"\\n            </div>\\n            <div class=\\\"editor-body \").concat(classes, \"\\\" contenteditable=\\\"true\\\">\\n                ...\\n            </div>\\n        </div>\");\n};\n\n//# sourceURL=webpack://AJE/./src/js/templates.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/index.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});