<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Import bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <!-- Import style sheet (edit this sheet to switch between light and dark themes) -->
    <link rel="stylesheet" href="./css/styles.css">
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <!-- Github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>Active Rich Text Editor</title>
</head>

<body>

    <style>
        .header {
            background-color:var(--colour-secondary);
            padding:0.5rem;
        }
        header {
            display:flex;
            justify-content:flex-start;
            padding:0;
            margin:0;
        }
        img {
            width:80px;
            height:80px;
        }
        h1 {
            margin:0;
            padding:0 0.5rem;
            font-size: 1.3rem;
        }
        h2 {
            margin:0;
            padding:0 0.5rem;
            font-size: 1rem;
            color:white;
        }
        div.buttons {
            margin:0;
            display:flex;
            justify-content: flex-end;
        }
        div.buttons span {
            display:inline-block;
            padding-left:0.5rem;
        }
    </style>

    <div class="header">

        <header>
            <img src="./img/logo-medium.png" alt="ARTE Logo"/>
            <div>
                <h1>The Active Rich Text Editor</h1>
                <h2>A free, open source and extensible library for implementing WYSIWYG editors in vanilla javascript that supports active components.</h2>
            </div>
        </header>

        <div class="buttons">
            <a class="github-button" href="https://github.com/Wolsten" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" aria-label="Follow @Wolsten on GitHub">Follow @Wolsten</a>     
            <a class="github-button" href="https://github.com/sponsors/Wolsten" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-heart" data-size="large" aria-label="Sponsor @Wolsten on GitHub">Sponsor</a>
            <a class="github-button" href="https://github.com/Wolsten/ARTE/subscription" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-eye" data-size="large" aria-label="Watch Wolsten/ARTE on GitHub">Watch</a>
            <a class="github-button" href="https://github.com/Wolsten/ARTE" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-star" data-size="large" aria-label="Star Wolsten/ARTE on GitHub">Star</a>
        </div>

    </div>

    <!-- The inner html will be replaced with the editor instance -->
    <div id="editor">

        <h1>Welcome to <span style="font-weight:bold;">ARTE</span></h1>

        <p>ARTE stands for "Active Rich Text Editor" and is pronounced "Arty".</p>

        <h2>Blocks</h2>

        <p>AJE supports the main block formats, including headings and paragraphs. These can be extended easily for other block types.</p>

        <blockquote>For example, I am a block quote.</blockquote>
        
        <h2>Lists</h2>

        <h3>Ordered lists</h3>
        <ul>
            <li>I am an unordered list A</li>
            <li>I am an unordered list B</li>
            <li>I am an unordered list C</li>
        </ul>

        <h3>Ordered and indented lists</h3>
        <ol>
            <li>I am an ordered list 1</li>
            <li>I am an ordered list 2 with an indented unordered list
                <ul>
                    <li>Item A</li>
                    <li>Item B</li>
                    <li>Item C</li>
                </ul>
            </li>
            <li>I am an ordered list 3</li>
        </ol>

        <h2>Inline styling</h2>

        <p>AJE supports a range of inline styling options which can be extended easily.</p>

        <p>For example, I am some <span style="color:yellow; background-color:hsl(100,120%,50%);">coloured text</span> which was added using a plugin called colours.js.</p>

        <h2>Custom elements</h2>

        <h3>Block level custom elements</h3>

        <p>This paragraph contains a block level custom element:
            <custom id="kranj6hr0745u1oxn7du">
                <span class="property1">a</span>
                <span class="property2">b</span>
                <span class="property3">c</span>
            </custom>
        </p>

        <h3>Inline custom elements</h3>

        <p>This paragraph contains an inline custom element with a link to the <a href="https://bbc.co.uk" data-display="2" data-label="BBC"></a> website.</p>

        <h2>Miscellanious</h2>

        <h3>Saving editor contents</h3>

        <p>When the editor content is saved the data is cleaned to remove any non-supported elements or styling. Additionally, custom elements can have an optional "clean" method that is invoked automatically on save to handle any custom cleaning required.</p>

    </div>

    <button type="button" id="save">Save</button>

    <!-- Replace with ./js/ARTE-bundle-ES5.js for the trnaspiled version -->
    <script src="./js/ARTE-bundle-ES6.js" charset="utf-8"></script>

    <script type="text/javascript"> 

        // Define where the editor will appear
        const target = document.getElementById('editor')

        // Set the initial content to the current content of the editor div
        let content = target.innerHTML

        // Clear any existing content
        target.innerHTML = ''

        // Setup toolbar
        const toolbar = [
            [ ARTE.Blocks.H1, ARTE.Blocks.H2, ARTE.Blocks.H3, ARTE.Blocks.P, ARTE.Blocks.BQ],
            [ ARTE.Blocks.OL, ARTE.Blocks.UL],
            [ ARTE.Styles.B, ARTE.Styles.I, ARTE.Styles.U, ARTE.Colours.FOREGROUND, ARTE.Colours.BACKGROUND, ARTE.Styles.CLEAR],
            [ ARTE.Buffer.UNDO, ARTE.Buffer.REDO ],
            [ ARTE.Mentions.BUTTON, ARTE.Links.BUTTON, ARTE.Custom.BUTTON ]
        ]

        // Setup Mentions plugin with list of people
        ARTE.Mentions.setup(['David','William', 'Jenny','Sally', 'Sarah', 'Susan','Brian'])

        // Define editor options
        const options = {
            // Automatically number headings using outline numbering. Allowed values true or false     
            headingNumbers: true, 
            // Number of Undo operations supported, max 10       
            bufferSize: 10,
            // debugging flag, e.g. to output selection ranges
            debug: false
        }

        // Create editor and add to dom in target position
        const editor = new ARTE.Editor(target, content, toolbar, options)

        // Configure save button
        const save = document.getElementById('save')
        save.addEventListener('click', ()=>{
            let xml = editor.save()
            // Insert line feed before all opening tags to make easier to read
            xml = xml.replace(/(<[^\/.]+?>)/gm, '\n$1')
            const drawer = new ARTE.Modal({
                type:'full-screen', 
                title:'Cleaned XML to be saved',
                html:`<textarea style="height:100%;width:100%;padding:2rem;" readonly>${xml}</textarea>`,
                buttons:{cancel:{label:'Close'}},
                escape:true
            })
            drawer.show()
        })
    </script>
    
</body>
</html>